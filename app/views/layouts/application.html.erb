<!DOCTYPE html>
<html>
<head>
  <title>Mind Finder</title>
  <%= stylesheet_link_tag    "application", media: "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
  
  
</head>
<body>
  <header>
	  <div id="navigation_bar">
		  <%= link_to image_tag("logo.png"), current_user ? tests_path : index_path %>
		  
			<ul class="menu">
				<li class="active">
				<%= link_to t(:title_home), current_user ? tests_path : index_path %>
        
				</li>
				<li><%= link_to "Rooms", rooms_path %></li>
				<li><a href="#"><%=t :title_pages %></a></li>
				<li><a href="#"><%=t :title_blog %></a></li>
				<li><a href="#"><%=t :title_contact %></a></li>
				
				<div class="select_lang">
				  <li>
						<div class="selectbox">
						  <div class="select">
						    <div class="text"><%= get_full_locale %></div>
						    <i class="arrow"></i>
						  </div>
						  <div class="dropdown">
						    <ul>
						      <%= link_to raw("<li>English</li>"), { :controller => 'application', :action => 'change_locale', :locale => 'en' } unless I18n.locale == :en %>
						      <%= link_to raw("<li>Русский</li>"), { :controller => 'application', :action => 'change_locale', :locale => 'ru' } unless I18n.locale == :ru %>
						      <%= link_to raw("<li>Українська</li>"), { :controller => 'application', :action => 'change_locale', :locale => 'uk' } unless I18n.locale == :uk %>
						    </ul>
						  </div>
						</div>			      
			    </li>
			  </div>
			</ul>
	  </div>
  </header>

  <div id="middle">
  	<% if params[:controller] == "home" && params[:action] == "index" %>

    <div id="content">
      <%= yield %>
    </div>

    <% else %>

    <div id="breadcrumbs">
      <ul><%= yield :breadcrumbs %></ul>
    </div>

  	<div id="left">
      <% unless Room.roots.present? %>
        There are no rooms or tests
      <% end %>

      <ul id='submenu'>
        <% Room.roots.each do |root| %>
          <li>
            <span><%= root.name %></span>
            <%= render partial: 'shared/submenu_pages', locals: { pages: root.children, main: root } if root.children.present? %>
          </li>
        <% end %>
      </ul>
    </div>
  	
  	<div id="right">
      <div id="headline">
    		<div id="title">
    			<h1><%= yield :headline_title %></h1>
    		</div>

    		<% if current_user %>
  			<div id="current_user">
  			  <%=t :logged_in_title %> <span><%= current_user.email %></span><br />
  			  <%= link_to t(:logged_in_log_out_link), logout_path, class: "link b-link-blue" %>
  			</div>
  			<% end %>
      </div>

      <div id="content">
        <%= yield %>
      </div>
  	</div>

    <% end %>
  </div>

	<footer>
		<!-- #TODO: footer -->
	</footer>
</body>
</html>
